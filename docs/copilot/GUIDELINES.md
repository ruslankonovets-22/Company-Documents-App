# ü§ñ GitHub Copilot Guidelines - Company Documents App v0.0.2

**–í–µ—Ä—Å–∏—è:** v0.0.2  
**–î–∞—Ç–∞:** 2025-11-20  
**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ù–´–ô –î–û–ö–£–ú–ï–ù–¢ –¥–ª—è GitHub Copilot

---

## ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã!

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **–∫—Ä–∏—Ç–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º.  
**–ù–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è**, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—Ç —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º!

---

## 1. –£—Ä–æ–≤–Ω–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

–ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã **–í–°–ï–ì–î–ê** —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:

### 1.1 CERTAIN (100%)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Frappe v15

**–ü—Ä–∏–º–µ—Ä:**
```
CERTAIN: –í Frappe v15 –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Server Scripts –Ω—É–∂–µ–Ω —Ñ–ª–∞–≥ -g:
bench set-config -g server_script_enabled 1
```

### 1.2 CONFIDENT (80-99%)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –õ–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä:**
```
CONFIDENT: –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ DocType –Ω—É–∂–Ω–æ:
1. –î–æ–±–∞–≤–∏—Ç—å –≤ JSON –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å bench migrate
–•–æ—Ç—è —è –Ω–µ –≤–∏–∂—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ, —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Frappe.
```

### 1.3 UNCERTAIN (50-79%)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ö–æ–∂–∏—Ö —Å–ª—É—á–∞–µ–≤

**–ü—Ä–∏–º–µ—Ä:**
```
UNCERTAIN: –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫—ç—à–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
bench clear-cache
–ù–æ –ª—É—á—à–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
```

### 1.4 DON'T KNOW (<50%)
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ù–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
DON'T KNOW: –Ø –Ω–µ –∑–Ω–∞—é —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É —ç—Ç–æ–π –æ—à–∏–±–∫–∏.
–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –õ–æ–≥–∏ –≤ Error Log
2. bench mariadb –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î
3. –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –Ω–∞ —Ñ–æ—Ä—É–º–µ Frappe
```

**‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –≤—ã–¥–∞–≤–∞–π—Ç–µ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –∑–∞ —Ñ–∞–∫—Ç—ã!**

---

## 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (–í–ï–†–°–ò–ò - –ù–ï –ü–†–ï–î–õ–ê–ì–ê–¢–¨ –î–†–£–ì–ò–ï!)

### 2.1 –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **Frappe Framework** | version-15 | ‚ö†Ô∏è –ù–ï v14, –ù–ï v16! |
| **ERPNext** | v15.83.0 | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **HRMS** | v15.52.0 | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **Raven** | v2.6.4 | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **pibiDAV** | version-15 | –í–µ—Ç–∫–∞ version-15 |
| **Python** | 3.10+ | –ú–∏–Ω–∏–º—É–º 3.10 |
| **MariaDB** | 10.6 | –°–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å Frappe v15 |
| **Node.js** | 18+ | –î–ª—è —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ |

### 2.2 ‚ùå –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å

- ‚ùå Frappe v14 - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
- ‚ùå Frappe v16 - –µ—â–µ –Ω–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞
- ‚ùå PostgreSQL - Frappe –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MariaDB
- ‚ùå Python 2.x - –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚ùå –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ ERPNext

---

## 3. –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (NEVER/ALWAYS)

### 3.1 NEVER (–ù–ò–ö–û–ì–î–ê –Ω–µ –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ)

#### ‚ùå NEVER: f-strings –≤ bash
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
docker compose exec backend bash -c "
python -c 'print(f\"App: {frappe_app}\")'  # bash –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç {}!
"

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
docker compose exec backend bash -c "
python -c 'print(\"App: {}\".format(\"'$frappe_app'\"))'
"
```

#### ‚ùå NEVER: bench set-config –±–µ–∑ -g –≤ v15
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Ä–∞–±–æ—Ç–∞–ª–æ –≤ v14)
bench set-config server_script_enabled true

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (v15)
bench set-config -g server_script_enabled 1
```

#### ‚ùå NEVER: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nano/vim –≤ Docker
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - nano –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
docker compose exec backend nano /path/to/file

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - heredoc
docker compose exec backend bash -c 'cat > /path/to/file << '\''EOF'\''
content here
EOF'
```

#### ‚ùå NEVER: –°–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ v0.0.2
```
–ü—Ä–∏—á–∏–Ω–∞: –ü–û–õ–ò–ì–û–ù - –≤—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å –Ω—É–ª—è
–ú–∏–≥—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å v1.0.0+
```

#### ‚ùå NEVER: –ú–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
```bash
# ‚ö†Ô∏è –ü–û–†–Ø–î–û–ö –ö–†–ò–¢–ò–ß–ï–ù!
bench new-site localhost \
  --install-app erpnext \      # 1
  --install-app hrms \          # 2
  --install-app raven \         # 3
  --install-app pibidav \       # 4
  --install-app company_documents  # 5 - –ü–û–°–õ–ï–î–ù–ò–ú!
```

### 3.2 ALWAYS (–í–°–ï–ì–î–ê –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ)

#### ‚úÖ ALWAYS: –£–∫–∞–∑—ã–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
```
–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å: CERTAIN/CONFIDENT/UNCERTAIN/DON'T KNOW
```

#### ‚úÖ ALWAYS: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å heredoc –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
```bash
docker compose exec backend bash -c 'cat > /path/to/file << '\''EOF'\''
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
EOF'
```

#### ‚úÖ ALWAYS: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤–µ—Ä—Å–∏—é –ø–µ—Ä–µ–¥ —Å–æ–≤–µ—Ç–æ–º
```bash
# –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ —Å–æ–≤–µ—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
bench version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v15.x.x
```

#### ‚úÖ ALWAYS: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ app –¥–ª—è DocTypes
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
{"dt": "DocType", "filters": [["module", "=", "Documents"]]}

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
{"dt": "DocType", "filters": [["app", "=", "company_documents"]]}
```

#### ‚úÖ ALWAYS: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å fixtures –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
bench --site localhost export-fixtures
```

---

## 4. Frappe v15 Breaking Changes

### 4.1 Server Scripts Configuration

**v14 (–ù–ï –†–ê–ë–û–¢–ê–ï–¢ –≤ v15):**
```bash
bench set-config server_script_enabled true
```

**v15 (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):**
```bash
bench set-config -g server_script_enabled 1
```

**–ü—Ä–∏—á–∏–Ω–∞:** `is_safe_exec_enabled()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–û–õ–¨–ö–û `common_site_config.json`

### 4.2 –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–£–¥–∞–ª–µ–Ω—ã –∏–∑ Frappe v15:**
- googlemaps
- urllib3
- gitdb
- pypng
- schedule
- pycryptodome

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤ requirements.txt –µ—Å–ª–∏ –Ω—É–∂–Ω—ã

### 4.3 Database API

**–£–¥–∞–ª–µ–Ω—ã:**
- `frappe.db.touch()`
- `frappe.db.clear_table()`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `as_utf8`, `formatted`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```python
frappe.db.set_value(doctype, name, field, value)
```

---

## 5. –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã

### 5.1 –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (heredoc)

**–®–∞–±–ª–æ–Ω:**
```bash
docker compose exec backend bash -c 'cat > /path/to/file << '\''EOF'\''
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∑–¥–µ—Å—å
# –í—Å–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
# –ö–†–û–ú–ï –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ '\''EOF'\''
EOF'
```

**–î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤:**
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
cat > /tmp/myfile.py << 'EOF'
# content
EOF

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose cp /tmp/myfile.py backend:/workspace/frappe-bench/apps/company_documents/
```

### 5.2 Python –∫–æ–º–∞–Ω–¥—ã

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
python -c "print(f'Value: {variable}')"  # bash –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç {}
```

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```bash
# –°–ø–æ—Å–æ–± 1: .format()
python -c "print('Value: {}'.format('$variable'))"

# –°–ø–æ—Å–æ–± 2: heredoc
python << 'PYEOF'
variable = "test"
print(f"Value: {variable}")  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
PYEOF
```

### 5.3 Frappe Console

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π:**
```bash
docker compose exec backend bash
cd /workspace/frappe-bench
bench --site localhost console

>>> import frappe
>>> doc = frappe.get_doc("Document", "DOC-2025-00001")
>>> print(doc.project)
```

**–ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π (—Å–∫—Ä–∏–ø—Ç—ã):**
```bash
docker compose exec backend bash -c '
cd /workspace/frappe-bench && 
bench --site localhost console << '\''PYEOF'\''
import frappe
frappe.init()
frappe.connect()

# –í–∞—à –∫–æ–¥
docs = frappe.get_all("Document")
print(f"Found {len(docs)} documents")
PYEOF'
```

---

## 6. Fixtures Export

### 6.1 –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä

```python
# ‚ùå WRONG (exports 17 DocTypes including ERPNext standard):
{"dt": "DocType", "filters": [["module", "=", "Documents"]]}

# ‚ùå WRONG (exports only 2 DocTypes with custom=1):
{"dt": "DocType", "filters": [["module", "=", "Documents"], ["custom", "=", 1]]}

# ‚úÖ CORRECT (exports only 5 app DocTypes):
{"dt": "DocType", "filters": [["app", "=", "company_documents"]]}
```

### 6.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ app –¥–ª—è DocTypes

```python
import frappe

frappe.init()
frappe.connect()

doctypes = ["Document", "Document File", "Folder Structure Template", 
            "NextCloud Sync Settings", "Task Document Link"]

for dt_name in doctypes:
    dt = frappe.get_doc("DocType", dt_name)
    dt.app = "company_documents"
    dt.save()
    print(f"Set app for {dt_name}")

frappe.db.commit()
```

### 6.3 –ö–æ–º–∞–Ω–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞

```bash
cd /workspace/frappe-bench
bench --site localhost export-fixtures
```

---

## 7. NextCloud Sync Architecture

### 7.1 –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã

- **473 —Å—Ç—Ä–æ–∫–∏** —Å–∞–º–æ–ø–∏—Å–Ω–æ–≥–æ –∫–æ–¥–∞
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** pibidav –∫–æ–¥ (—Ç–æ–ª—å–∫–æ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
- **–ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã** —á–µ—Ä–µ–∑ `requests`
- **WebDAV –æ–ø–µ—Ä–∞—Ü–∏–∏:** MKCOL, PUT, MOVE, DELETE

### 7.2 get_nextcloud_config()

```python
def get_nextcloud_config():
    """
    –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ Single DocType
    ‚ö†Ô∏è Single = —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ tabSingles, –ù–ï –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ!
    """
    settings = frappe.get_single("NextCloud Sync Settings")
    
    # –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å (AES-256)
    nc_password = get_decrypted_password(
        "NextCloud Sync Settings",   # doctype
        "NextCloud Sync Settings",   # name (–¥–ª—è Single = doctype)
        "nc_password",               # fieldname
        raise_exception=False
    )
    
    return {
        'webdav_url': f"{settings.nc_url}/remote.php/dav/files/{settings.nc_username}",
        'password': nc_password,
        # ...
    }
```

### 7.3 WebDAV –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
from requests.auth import HTTPBasicAuth

auth = HTTPBasicAuth(username, password)

# MKCOL - —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
response = requests.request('MKCOL', folder_url, auth=auth)

# PUT - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
with open(file_path, 'rb') as f:
    response = requests.put(file_url, data=f, auth=auth)

# MOVE - –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å
headers = {'Destination': new_url}
response = requests.request('MOVE', old_url, headers=headers, auth=auth)

# DELETE - —É–¥–∞–ª–∏—Ç—å
response = requests.delete(file_url, auth=auth)
```

---

## 8. Docker Setup

### 8.1 apps.json

```json
[
  {"url": "https://github.com/frappe/erpnext", "branch": "v15.83.0"},
  {"url": "https://github.com/frappe/hrms", "branch": "v15.52.0"},
  {"url": "https://github.com/The-Commit-Company/raven", "branch": "v2.6.4"},
  {"url": "https://github.com/pibico/pibidav", "branch": "version-15"}
]
```

**‚ö†Ô∏è company_documents –ù–ï –≤ apps.json!** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

### 8.2 Containerfile

**–î–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Å–±–æ—Ä–∫–∞:**
1. **Builder** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç apps –∏–∑ GitHub
2. **Backend** - –∫–æ–ø–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç + –¥–æ–±–∞–≤–ª—è–µ—Ç company_documents

### 8.3 compose.yaml

**–ü–æ—Ä—Ç—ã:**
```yaml
ports:
  - "8081:8080"  # Host:Container
```

**–î–æ—Å—Ç—É–ø:** http://localhost:8081

---

## 9. Development Approach (–ü–û–õ–ò–ì–û–ù)

### 9.1 –ß—Ç–æ —Ç–∞–∫–æ–µ –ü–û–õ–ò–ì–û–ù?

**–ü–û–õ–ò–ì–û–ù** = –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π **–º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å**

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- ‚úÖ –ú–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å - –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å - –±—ã—Å—Ç—Ä–æ (`docker compose down -v`)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ù–ï –Ω—É–∂–Ω—ã - –≤—Å–µ–≥–¥–∞ —á–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è - —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 9.2 –ü–∞—Ä–æ–ª–∏ (DEV ONLY!)

```
Administrator: admin
Database root: 123
MariaDB password: 123
```

**‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏!**

### 9.3 Workflow

```bash
# 1. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
# 2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
docker compose down -v

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker build ... --tag custom-erpnext:v15-0.0.2

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker compose logs -f create-site
```

---

## 10. Common Problems and Solutions

### 10.1 Server Scripts –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** Server Scripts disabled

**CERTAIN –†–µ—à–µ–Ω–∏–µ:**
```bash
bench set-config -g server_script_enabled 1
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
cat /workspace/frappe-bench/sites/common_site_config.json
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "server_script_enabled": 1
```

### 10.2 Fixtures —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –ª–∏—à–Ω–∏–µ DocTypes

**–ü—Ä–æ–±–ª–µ–º–∞:** 17 DocTypes –≤–º–µ—Å—Ç–æ 5

**CERTAIN –†–µ—à–µ–Ω–∏–µ:**
```python
# –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ hooks.py
{"dt": "DocType", "filters": [["app", "=", "company_documents"]]}

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å app –¥–ª—è DocTypes
for dt_name in ["Document", "Document File", ...]:
    dt = frappe.get_doc("DocType", dt_name)
    dt.app = "company_documents"
    dt.save()
```

### 10.3 NextCloud sync –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**CONFIDENT –†–µ—à–µ–Ω–∏–µ:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
settings = frappe.get_single("NextCloud Sync Settings")
print(f"Enabled: {settings.enabled}")
print(f"URL: {settings.nc_url}")

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
curl -u username:password https://cloud.example.com/remote.php/dav/files/username/

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
# Desk ‚Üí Error Log ‚Üí –§–∏–ª—å—Ç—Ä: "NextCloud"
```

### 10.4 –ü–æ—Ä—Ç 8081 –∑–∞–Ω—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** `Error: bind: address already in use`

**CERTAIN –†–µ—à–µ–Ω–∏–µ:**
```yaml
# –í compose.yaml –∏–∑–º–µ–Ω–∏—Ç—å
ports:
  - "8082:8080"  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
```

---

## 11. Response Format

### 11.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

```
[–£–†–û–í–ï–ù–¨ –£–í–ï–†–ï–ù–ù–û–°–¢–ò]: [–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç]

[–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ]

[–ö–æ–¥/–∫–æ–º–∞–Ω–¥—ã]

[–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è/—Å—Å—ã–ª–∫–∏]
```

### 11.2 –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

```
CERTAIN: –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Server Scripts –≤ Frappe v15 –Ω—É–∂–µ–Ω —Ñ–ª–∞–≥ -g.

–í Frappe v15 –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: —Ñ—É–Ω–∫—Ü–∏—è is_safe_exec_enabled() 
–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–û–õ–¨–ö–û common_site_config.json (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥).

–ö–æ–º–∞–Ω–¥–∞:
```bash
bench set-config -g server_script_enabled 1
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
cat sites/common_site_config.json | grep server_script
```

‚ö†Ô∏è –§–ª–∞–≥ -g –∫—Ä–∏—Ç–∏—á–µ–Ω! –ë–µ–∑ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—à–µ—Ç –≤ site_config.json 
–∏ Server Scripts –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ò—Å—Ç–æ—á–Ω–∏–∫: https://github.com/frappe/frappe/wiki/Migrating-to-Version-15
```

---

## 12. Documentation Links

### 12.1 –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[INDEX.md](../INDEX.md)** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **[ARCHITECTURE.md](../ARCHITECTURE.md)** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[DEVELOPMENT.md](../DEVELOPMENT.md)** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **[NEXTCLOUD_SYNC.md](../NEXTCLOUD_SYNC.md)** - NextCloud sync
- **[DOCKER_SETUP.md](../DOCKER_SETUP.md)** - Docker setup
- **[FIXTURES.md](../FIXTURES.md)** - Fixtures
- **[COMMON_COMMANDS.md](COMMON_COMMANDS.md)** - —á–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã

### 12.2 –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

- [Frappe v15 Migration](https://github.com/frappe/frappe/wiki/Migrating-to-Version-15)
- [NextCloud WebDAV API](https://docs.nextcloud.com/server/stable/developer_manual/client_apis/WebDAV/)
- [frappe_docker](https://github.com/frappe/frappe_docker)
- [Frappe Framework Docs](https://frappeframework.com/docs)

---

## 13. Changelog

### v0.0.2 (2025-11-20)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω GUIDELINES.md –¥–ª—è Copilot
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã fixtures (app –≤–º–µ—Å—Ç–æ module)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω app –¥–ª—è –≤—Å–µ—Ö DocTypes
- ‚úÖ Docker —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ GitHub (–Ω–µ –∏–∑ –∞—Ä—Ö–∏–≤–∞)

### v0.0.1 (2025-09-04)
- Initial development version

---

## 14. Final Checklist

–ü–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –£–∫–∞–∑–∞–Ω —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏?
- [ ] –ù–µ –Ω–∞—Ä—É—à–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ NEVER?
- [ ] –°–æ–±–ª—é–¥–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ ALWAYS?
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏?
- [ ] –£—á—Ç–µ–Ω—ã breaking changes v15?
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞?
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ?

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-20

**–ü–æ–º–Ω–∏—Ç–µ:** –õ—É—á—à–µ —Å–∫–∞–∑–∞—Ç—å "DON'T KNOW", —á–µ–º –¥–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç!
